<Page
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:library="using:GameBarBrowser.Library"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:Custom="using:Microsoft.UI.Xaml.Controls"
    x:Class="GameBarBrowser.Library.LibraryPage"
    mc:Ignorable="d"
    Background="{ThemeResource ApplicationPageBackgroundThemeBrush}">

    <ScrollViewer VerticalScrollBarVisibility="Auto">
        <StackPanel Orientation="Vertical" 
                    HorizontalAlignment="Left" 
                    VerticalAlignment="Top" 
                    Padding="16">
            <StackPanel Orientation="Horizontal" Margin="0,0,0,16">
                <TextBlock Text="Library" 
                           VerticalAlignment="Center" 
                           Margin="0,0,0,0" 
                           FontSize="24" FontWeight="Bold"/>
            </StackPanel>

            <TextBlock Text="FAVOURITES" Margin="0,16,0,8" FontSize="16" Foreground="Gray" FontWeight="SemiBold"/>

            <TextBox x:Name="favouritesSearchBar"
                     PlaceholderText="Search Favourites"
                     Margin="0,0,0,8"
                     Width="500"
                     HorizontalAlignment="Left"
                     TextChanged="favouritesSearchBar_TextChanged"/>
            <ListView x:Name="bookmarksLV"
                      ItemsSource="{x:Bind FilteredBookmarks}"
                      SelectionMode="None"
                      IsItemClickEnabled="True"
                      ItemClick="bookmarksLV_ItemClick">

                <ListView.ItemTemplate>
                    <DataTemplate x:DataType="library:Bookmark">
                        <ListViewItem RightTapped="bookmarksLV_RightTapped">
                            <ListViewItem.ContextFlyout>
                                <MenuFlyout>
                                    <MenuFlyoutItem Text="Open in a New Tab" Icon="NewWindow" Click="MF_newTab_Click"/>
                                    <MenuFlyoutItem Text="Open in default browser" Icon="World" Click="MF_defaultBrowser_Click"/>
                                    <MenuFlyoutItem Text="Edit" Icon="Edit" Click="MF_edit_Click"/>
                                    <MenuFlyoutSubItem Text="Rearrange" Icon="Sort">
                                        <MenuFlyoutItem Text="Move Up" Click="MF_moveUp_Click"/>
                                        <MenuFlyoutItem Text="Move Down" Click="MF_moveDown_Click"/>
                                    </MenuFlyoutSubItem>
                                    <MenuFlyoutItem Text="Delete" Icon="Delete" Click="MF_delete_Click"/>
                                </MenuFlyout>
                            </ListViewItem.ContextFlyout>
                            <Grid Padding="0,8,0,8"
                              ColumnSpacing="8">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="*"/>
                                <RowDefinition Height="*"/>
                            </Grid.RowDefinitions>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="auto"/>
                                    <ColumnDefinition Width="300"/>
                                    <ColumnDefinition Width="auto"/>
                                </Grid.ColumnDefinitions>

                                <Image Grid.Row="0"
                                   Grid.RowSpan="2"
                                   Grid.Column="0"
                                   Width="32"
                                   Height="32"
                                   Source="{x:Bind Favicon}"/>
                            <TextBlock Grid.Row="0"
                                       Grid.Column="1"
                                       Text="{x:Bind Name}"
                                       Style="{ThemeResource BaseTextBlockStyle}"/>
                            <TextBlock Grid.Row="1"
                                       Grid.Column="1"
                                       Text="{x:Bind URI}"
                                       Style="{ThemeResource BodyTextBlockStyle}"/>
                            <TextBlock Grid.Row="0"
                                       Grid.Column="2"
                                       Text="{x:Bind LastVisited}"
                                       Style="{ThemeResource BodyTextBlockStyle}"/>
                        </Grid>
                        </ListViewItem>
                    </DataTemplate>
                </ListView.ItemTemplate>
            </ListView>

            <TextBlock Text="HISTORY" Margin="0,28,0,8" FontSize="16" Foreground="Gray" FontWeight="SemiBold"/>
        </StackPanel>
    </ScrollViewer>
</Page>
